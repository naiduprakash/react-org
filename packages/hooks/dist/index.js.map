{"version":3,"file":"index.js","sources":["../src/utils/debounce.ts","../src/use-debounce.ts","../src/use-async.ts"],"sourcesContent":["export default function debounce(\n  func: Function,\n  wait: number,\n  immediate?: boolean\n) {\n  let timeout: null | number = null;\n  return function (this: any) {\n    const context = this;\n    const args = arguments;\n    const later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    timeout && clearTimeout(timeout);\n    timeout = window.setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n","import { useCallback } from \"react\";\nimport debounce from \"./utils/debounce\";\n\nexport default function useDebounce(fn:Function, time:number, dependencies:Array<any>) {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useCallback(debounce(fn, time), dependencies);\n}\n","import {\n  Reducer,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n} from \"react\";\n\nimport useDebounce from \"./use-debounce\";\n\ntype Action = {\n  type: string;\n  payload?: any;\n};\n\ntype State = {\n  status?: string;\n  data?: any;\n  error?: any;\n  isIdle?: boolean;\n  isPending?: boolean;\n  isComplete?: boolean;\n  isSuccess?: boolean;\n  isError?: boolean;\n  isReset?: boolean;\n  cancel?: Function; // __TODO__: update with proper fn type\n  debounceExecute?: Function; // __TODO__: update with proper fn type\n  execute?: Function; // __TODO__: update with proper fn type\n  reset?: Function; // __TODO__: update with proper fn type\n  setQueryData?: Function; // __TODO__: update with proper fn type\n};\n\ntype Config = {\n  intialState?: State;\n  enabled?: boolean;\n  immediate?: boolean;\n  infinite?: boolean;\n  overwrite?: boolean;\n  select?: Function;\n  onError?: Function;\n  onSuccess?: Function;\n  onStart?: Function;\n  onComplete?: Function;\n  debounceTime?: number;\n};\n\nconst FUNCTION_PLACEHOLDER = () => {};\n\nconst ASYNC_STATUS = {\n  IDLE: \"idle\",\n  PENDING: \"pending\",\n  SUCCESS: \"success\",\n  ERROR: \"error\",\n};\n\nconst ACTION_TYPES = {\n  START: \"start\",\n  SUCCESS: \"success\",\n  ERROR: \"error\",\n  COMPLETE: \"complete\",\n  RESET: \"reset\",\n  SET_DATA: \"set-data\",\n};\n\nconst API_CANCELED_ERROR = \"canceled\";\n\nconst INITIAL_STATE: State = {\n  status: ASYNC_STATUS.IDLE,\n  data: null,\n  error: null,\n  isIdle: true,\n  isPending: false,\n  isComplete: false,\n  isSuccess: false,\n  isError: false,\n  isReset: false,\n};\n\nfunction handleActionStart(state: State, action: Action) {\n  const updatedState = {\n    ...state,\n    status: ASYNC_STATUS.PENDING,\n    isComplete: false,\n  };\n  if (action.payload.overwrite) {\n    updatedState.data = [];\n  }\n  return updatedState;\n}\n\nfunction handleActionSuccess(state: State, action: Action) {\n  const { data: _data, infinite, overwrite, paginate } = action.payload;\n  let data;\n  if (infinite) {\n    data = overwrite ? _data : [...(state.data || []), ..._data];\n  } else {\n    data = action.payload;\n  }\n  return {\n    ...state,\n    status: ASYNC_STATUS.SUCCESS,\n    data: data,\n    paginate: paginate,\n  };\n}\n\nfunction handleActionError(state = {}, action: Action) {\n  return { ...state, status: ASYNC_STATUS.ERROR, error: action.payload };\n}\nfunction handleActionComplete(state = {}, action: Action) {\n  return { ...state, isComplete: true };\n}\nfunction handleActionReset(state = {}, action: Action) {\n  return { ...state, ...INITIAL_STATE, isComplete: false, isReset: true };\n}\nfunction handleActionSetData(state = {}, action: Action) {\n  return { ...state, data: action.payload };\n}\n\nconst asyncReducer: Reducer<State, Action> = (\n  state = INITIAL_STATE,\n  action: Action\n) => {\n  switch (action.type) {\n    case ACTION_TYPES.START: {\n      return handleActionStart(state, action);\n    }\n    case ACTION_TYPES.SUCCESS: {\n      return handleActionSuccess(state, action);\n    }\n    case ACTION_TYPES.ERROR: {\n      return handleActionError(state, action);\n    }\n    case ACTION_TYPES.COMPLETE: {\n      return handleActionComplete(state, action);\n    }\n    case ACTION_TYPES.RESET: {\n      return handleActionReset(state, action);\n    }\n    case ACTION_TYPES.SET_DATA: {\n      return handleActionSetData(state, action);\n    }\n    default: {\n      throw new Error(`Action ${action.type} is not handled in asyncReducer`);\n    }\n  }\n};\n\nexport default function useAsync(\n  asyncFunction: Function,\n  defaultConfig: Config = {}\n) {\n  const {\n    intialState = {},\n    enabled = true,\n    immediate = true,\n    infinite = false,\n    select,\n    onError = FUNCTION_PLACEHOLDER,\n    onSuccess = FUNCTION_PLACEHOLDER,\n    onStart = FUNCTION_PLACEHOLDER,\n    onComplete = FUNCTION_PLACEHOLDER,\n    debounceTime = 200,\n  } = defaultConfig;\n\n  // Note: required for React.Strictmode to work\n  const ignoreRef = useRef(false);\n\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  const [state, dispatch] = useReducer(\n    asyncReducer,\n    Object.assign({}, INITIAL_STATE, intialState)\n  );\n\n  const handleSetQueryData = useCallback((_data: any) => {\n    dispatch({\n      type: ACTION_TYPES.SET_DATA,\n      payload: _data,\n    });\n  }, []);\n\n  const handleExecute = useCallback(\n    (args: any = {}, config: Config = {}) => {\n      (async () => {\n        dispatch({\n          type: ACTION_TYPES.START,\n          payload: { overwrite: config.overwrite },\n        });\n        abortControllerRef.current = new AbortController();\n        const _onStart = config?.onStart || onStart;\n\n        await _onStart();\n        asyncFunction({ ...args, signal: abortControllerRef.current.signal })\n          .then(async (res: any) => {\n            let payload;\n            if (select) {\n              const selectRes = select(res);\n              payload = {\n                data: selectRes?.data,\n                paginate: selectRes?.paginate,\n              };\n            } else if (infinite) {\n              payload = {\n                data: res?.data?.data,\n                paginate: res?.data?.paginate,\n              };\n            } else {\n              payload = res;\n            }\n\n            payload.overwrite = config.overwrite;\n            payload.infinite = infinite;\n\n            dispatch({ type: ACTION_TYPES.SUCCESS, payload: payload });\n            const _onSuccess = config?.onSuccess || onSuccess;\n            await _onSuccess(payload);\n          })\n          .catch(async (err: any) => {\n            // IGNORED cancelled  error\n            if (err.message === API_CANCELED_ERROR) return;\n\n            dispatch({\n              type: ACTION_TYPES.ERROR,\n              payload: err?.response || err,\n            });\n            const _onError = config?.onError || onError;\n            await _onError(err);\n          })\n          .finally(async () => {\n            dispatch({ type: ACTION_TYPES.COMPLETE });\n            const _onComplete = config?.onComplete || onComplete;\n            await _onComplete();\n          });\n      })();\n    },\n    [asyncFunction, infinite, onComplete, onError, onStart, onSuccess, select]\n  );\n\n  const handleDebounceExecute = useDebounce(handleExecute, debounceTime, [\n    handleExecute,\n    debounceTime,\n  ]);\n\n  const handleReset = useCallback(() => {\n    dispatch({ type: ACTION_TYPES.RESET });\n  }, []);\n\n  const handleCancel = useCallback(() => {\n    abortControllerRef?.current?.abort?.();\n  }, []);\n\n  useEffect(() => {\n    if (\n      !ignoreRef.current &&\n      state.status === ASYNC_STATUS.IDLE &&\n      immediate &&\n      enabled\n    ) {\n      handleExecute();\n    }\n    return () => {\n      ignoreRef.current = true;\n    };\n  }, [enabled, handleExecute, immediate, state, state.status]);\n\n  return useMemo(() => {\n    return {\n      ...state,\n\n      reset: handleReset,\n      cancel: handleCancel,\n      execute: handleExecute,\n      setQueryData: handleSetQueryData,\n      debounceExecute: handleDebounceExecute,\n\n      isIdle: state.status === ASYNC_STATUS.IDLE,\n      isPending: state.status === ASYNC_STATUS.PENDING,\n      isError: state.status === ASYNC_STATUS.ERROR,\n      isSuccess: state.status === ASYNC_STATUS.SUCCESS,\n    };\n  }, [\n    state,\n    handleExecute,\n    handleDebounceExecute,\n    handleSetQueryData,\n    handleReset,\n    handleCancel,\n  ]);\n}\n"],"names":["debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","window","setTimeout","useDebounce","fn","time","dependencies","useCallback","FUNCTION_PLACEHOLDER","ASYNC_STATUS","IDLE","PENDING","SUCCESS","ERROR","ACTION_TYPES","START","COMPLETE","RESET","SET_DATA","API_CANCELED_ERROR","INITIAL_STATE","status","data","error","isIdle","isPending","isComplete","isSuccess","isError","isReset","handleActionStart","state","action","updatedState","payload","overwrite","handleActionSuccess","_data","infinite","paginate","handleActionError","handleActionComplete","handleActionReset","handleActionSetData","asyncReducer","type","Error","useAsync","asyncFunction","defaultConfig","intialState","enabled","select","onError","onSuccess","onStart","onComplete","debounceTime","ignoreRef","useRef","abortControllerRef","useReducer","Object","assign","dispatch","handleSetQueryData","handleExecute","config","current","AbortController","_onStart","signal","then","res","selectRes","_onSuccess","err","message","response","_onError","_onComplete","handleDebounceExecute","handleReset","handleCancel","abort","useEffect","useMemo","reset","cancel","execute","setQueryData","debounceExecute"],"mappings":"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"}